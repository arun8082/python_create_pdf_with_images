<!doctype html>
<head>
    <title>Simple tables</title>
    <link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css"/>
    <script src="https://code.jquery.com/jquery-3.5.1.js" type="text/javascript"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.4/js/dataTables.buttons.min.js"
            type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js" type="text/javascript"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.html5.min.js" type="text/javascript"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.print.min.js"></script>
    <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
    <link href="https://printjs-4de6.kxcdn.com/print.min.css" rel="css/stylesheet"/>
</head>
<body>
<div class=page>
    <button type="button" onclick="printJS({ printable: 'example', type: 'html' })">
    Print Form with Header
 </button>
    <table id="example" class="display" style="border-collapse:collapse" border="1px">
        <thead>
            <tr style="background:grey">
                <td></td>
                {% for i in range(3) %}
                <td></td>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
        {% for cluster in data %}
        <tr><th colspan="{{4}}" style="background: #efe3e3;">Cluster Id: {{loop.index}}</th></tr>
            <tr>
                {% for imageName,base64image in cluster %}
                    {% if (loop.index)%5==0 %}
                        </tr><tr><td><div style="border:1px"><img src="data:image/jpg;base64,{{base64image}}" style="height:100px;width:100px;"/><br/>{{imageName}}</div></td>
                    {% else %}
                        <td><div style="border:1px"><img src="data:image/jpg;base64,{{base64image}}" style="height:100px;width:100px;"/><br/>{{imageName}}</div></td>
                    {% endif %}
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>

    </table>
</div>
</body>
</html>
